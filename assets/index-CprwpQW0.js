var mr=Object.defineProperty;var hr=(e,t,n)=>t in e?mr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ie=(e,t,n)=>hr(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const ke=(e,t,n)=>e<t?t:e>n?n:e,Ot=e=>ke(e,0,.5),an=(e,t)=>t==="strain"?3-4*e:(3-e)/(1+e),R=(e,t)=>{const n=document.getElementById(e);return n||(console.warn(`[ui/dom] element #${e} not found – using dummy.`),t())},ye=(e="0")=>{const t=document.createElement("input");return t.type="number",t.value=e,t},T=R("glCanvas",()=>{const e=document.createElement("canvas");return e.width=e.height=400,e}),x={lambda:R("lambda",()=>ye("1")),beta:R("beta",()=>ye("0")),rho:R("rho",()=>ye("0.1")),nuM:R("nuM",()=>ye("0.17")),nuP:R("nuP",()=>ye("0.33")),cmap:R("cmap",()=>{const e=document.createElement("select");return e.value="0",e}),plane:document.querySelectorAll('input[name="plane"]'),comp:document.querySelectorAll('input[name="comp"]')},J=R("holeChk",()=>ye("0")),wt=R("viewX",()=>ye("0")),Et=R("viewY",()=>ye("0")),At=R("viewZoom",()=>ye("1")),gr=R("viewReset",()=>document.createElement("button")),br=R("btnSave",()=>document.createElement("button")),yr=R("resetGeom",()=>document.createElement("button")),xr=R("resetMat",()=>document.createElement("button")),Re=R("legendCanvas",()=>{const e=document.createElement("canvas");return e.width=256,e.height=14,e}),sn=Re.getContext("2d"),wr=R("legendMin",()=>document.createElement("span")),Er=R("legendMax",()=>document.createElement("span")),kn=R("cur_xx",()=>document.createElement("span")),Bn=R("cur_yy",()=>document.createElement("span")),Un=R("cur_xy",()=>document.createElement("span")),Ar=R("min_xx",()=>document.createElement("span")),Tr=R("max_xx",()=>document.createElement("span")),_r=R("min_yy",()=>document.createElement("span")),Or=R("max_yy",()=>document.createElement("span")),Lr=R("min_xy",()=>document.createElement("span")),Mr=R("max_xy",()=>document.createElement("span")),xe=document.createElement("div"),we=document.createElement("div"),le={lambda:1,beta:0,rho:.1,nuM:.17,nuP:.33,plane:"strain"};function Sr(){const e=document.querySelector("#save-modal"),t=document.querySelector("#cancel-save-btn"),n=document.querySelector("#confirm-save-btn"),r=document.querySelector("#resolution-select"),o=document.querySelector("#dots-checkbox"),i=document.querySelector("#visualization-container");br.addEventListener("click",()=>{e.classList.remove("hidden")}),t.addEventListener("click",()=>{e.classList.add("hidden")}),n.addEventListener("click",async()=>{if(!i)return;const s=parseInt(r.value,10),u=i.clientWidth,c=s/u,p=o.checked;p||(xe.style.display="none",we.style.display="none");try{const f=await html2canvas(i,{scale:c,useCORS:!0,backgroundColor:null}),g=document.createElement("a");g.download=`stress-field-${s}px.png`,g.href=f.toDataURL("image/png"),g.click()}catch(f){console.error("Failed to save canvas:",f)}finally{p||(xe.style.display="block",we.style.display="block"),e.classList.add("hidden")}}),yr.addEventListener("click",()=>{x.lambda.value=le.lambda.toString(),x.beta.value=le.beta.toString()}),xr.addEventListener("click",()=>{x.rho.value=le.rho.toString(),x.nuM.value=le.nuM.toString(),x.nuP.value=le.nuP.toString(),x.nuP.disabled=!1,J.checked=!1,[...x.plane].forEach(s=>s.checked=s.value===le.plane)}),J.addEventListener("input",()=>{J.checked?(x.rho.value="∞",x.nuP.value="0",x.nuP.disabled=!0):(x.rho.value=le.rho.toString(),x.nuP.value=le.nuP.toString(),x.nuP.disabled=!1)}),x.rho.addEventListener("input",()=>{J.checked=!1,x.nuP.disabled=!1}),x.nuP.addEventListener("input",()=>{J.checked=!1}),x.nuM.addEventListener("blur",()=>{const s=parseFloat(x.nuM.value);Number.isFinite(s)?x.nuM.value=Ot(s).toString():x.nuM.value=le.nuM.toString()}),x.nuP.addEventListener("blur",()=>{const s=parseFloat(x.nuP.value);Number.isFinite(s)?x.nuP.value=Ot(s).toString():x.nuP.value=le.nuP.toString()})}function Cr(e){const t=e.getContext("webgl2",{preserveDrawingBuffer:!0});if(!t)throw new Error("WebGL2 not supported");if(!t.getExtension("EXT_color_buffer_float"))throw new Error("EXT_color_buffer_float extension required");return t}function cn(e,t,n){const r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(r)??"shader error");return r}function Vt(e,t,n){const r=e.createProgram();if(e.attachShader(r,cn(e,e.VERTEX_SHADER,t)),e.attachShader(r,cn(e,e.FRAGMENT_SHADER,n)),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error(e.getProgramInfoLog(r)??"link error");return r}const $t=`#version 300 es\r
/* Two-triangle fullscreen quad */\r
\r
layout(location = 0) in vec2 a_position;\r
out vec2 v_ndc;\r
\r
void main() {\r
  v_ndc       = a_position;         /* NDC in (−1,1)² */\r
  gl_Position = vec4(a_position, 0.0, 1.0);\r
}\r
`,Nn=`#version 300 es\r
precision highp float;\r
\r
/* UNIFORMS */\r
uniform float u_r0, u_lambda, u_S, u_beta;\r
uniform float u_gamma, u_kappa_m, u_kappa_p;\r
uniform int   u_component, u_cmap, u_hole;\r
uniform float u_minVal, u_maxVal, u_zoom, u_aspect;\r
uniform vec2  u_pan;\r
\r
/* VARYINGS & OUTPUTS */\r
in  vec2 v_ndc;\r
out vec4 fragColor;\r
\r
/* COLORMAPS (Only used in final plate render) */\r
#ifdef IS_PLATE_FRAG\r
  vec3 hsv2rgb(float h, float s, float v) {\r
    float c = v * s, h6 = h / 60.0;\r
    float x = c * (1.0 - abs(mod(h6, 2.0) - 1.0));\r
    vec3 rgb = vec3(0.0);\r
    if      (h6 < 1.0) rgb = vec3(c, x, 0);\r
    else if (h6 < 2.0) rgb = vec3(x, c, 0);\r
    else if (h6 < 3.0) rgb = vec3(0, c, x);\r
    else if (h6 < 4.0) rgb = vec3(0, x, c);\r
    else if (h6 < 5.0) rgb = vec3(x, 0, c);\r
    else               rgb = vec3(c, 0, x);\r
    return rgb + (v - c);\r
  }\r
  vec3 rainbow(float t) { return hsv2rgb(270.0 - 270.0 * clamp(t, 0.0, 1.0), 1.0, 1.0); }\r
  vec3 jet(float t) { t = clamp(t, 0.0, 1.0); return vec3(clamp(1.5-abs(4.0*t-3.0),0.0,1.0),clamp(1.5-abs(4.0*t-2.0),0.0,1.0),clamp(1.5-abs(4.0*t-1.0),0.0,1.0)); }\r
  vec3 hot(float t) { t=clamp(t,0.0,1.0); return vec3(min(1.0,3.0*t), t<1.0/3.0?0.0:min(1.0,3.0*(t-1.0/3.0)), t<2.0/3.0?0.0:min(1.0,3.0*(t-2.0/3.0)));}\r
  vec3 coolWarm(float t) {\r
    t = clamp(t, 0.0, 1.0);\r
    vec3 cold = vec3(0.23, 0.30, 0.75);\r
    vec3 neutral = vec3(0.86, 0.87, 0.91);\r
    vec3 warm = vec3(0.70, 0.02, 0.15);\r
    return mix(t < 0.5 ? cold : neutral, t < 0.5 ? neutral : warm, t < 0.5 ? t * 2.0 : (t-0.5)*2.0);\r
  }\r
  // NEW Grayscale function\r
  vec3 grayscale(float t) {\r
      return vec3(clamp(t, 0.0, 1.0));\r
  }\r
\r
  vec3 applyCMap(float v) {\r
    float t = (v - u_minVal) / (u_maxVal - u_minVal);\r
    if (u_cmap == 1) return jet(t);\r
    if (u_cmap == 2) return hot(t);\r
    if (u_cmap == 3) return coolWarm(t);\r
    // CHANGED THIS LINE\r
    if (u_cmap == 4) return grayscale(t);\r
    return rainbow(t);\r
  }\r
#endif\r
\r
/* STRESS CALCULATION (Used by both passes) */\r
vec3 getStress(vec2 xy) {\r
    float r = length(xy), th = atan(xy.y, xy.x);\r
    float A, B;\r
    if(u_hole == 1) { A = 0.0; B = 0.0; }\r
    else {\r
        A = (1.0 + u_kappa_m) / (2.0 + u_gamma * (u_kappa_p - 1.0));\r
        B = (1.0 + u_kappa_m) / (u_gamma + u_kappa_m);\r
    }\r
    float S = u_S, lam = u_lambda;\r
    float c2b = cos(2.0 * u_beta), s2b = sin(2.0 * u_beta);\r
    float sxx, syy, txy;\r
    if (r < u_r0-1e-9) {\r
        sxx = 0.5*S*((lam+1.0)*A + (1.0-lam)*B*c2b);\r
        syy = 0.5*S*((lam+1.0)*A - (1.0-lam)*B*c2b);\r
        txy = 0.5*S*(1.0-lam)*B*s2b;\r
    } else {\r
        float rr2 = (u_r0*u_r0)/(r*r), rr4 = rr2*rr2;\r
        float c2t = cos(2.0*th), s2t = sin(2.0*th);\r
        sxx = 0.5*S*(lam+1.0)*(1.0-(1.0-A)*rr2*c2t) + 0.5*S*(1.0-lam)*(c2b+(1.0-B)*(3.0*rr4*cos(4.0*th-2.0*u_beta)-4.0*rr2*cos(2.0*u_beta-3.0*th)*cos(th)));\r
        syy = 0.5*S*(lam+1.0)*(1.0+(1.0-A)*rr2*c2t) - 0.5*S*(1.0-lam)*(c2b+(1.0-B)*(3.0*rr4*cos(4.0*th-2.0*u_beta)-4.0*rr2*sin(2.0*u_beta-3.0*th)*sin(th)));\r
        txy = -0.5*S*(lam+1.0)*(1.0-A)*rr2*s2t + 0.5*S*(1.0-lam)*(s2b+(1.0-B)*(3.0*rr4-2.0*rr2)*sin(4.0*th-2.0*u_beta));\r
    }\r
    return vec3(sxx, syy, txy);\r
}\r
\r
void main() {\r
  vec2 world_xy = vec2(v_ndc.x * u_aspect, v_ndc.y);\r
  #ifdef IS_PLATE_FRAG\r
    world_xy = (world_xy + u_pan) / u_zoom;\r
  #endif\r
\r
  vec3 stress = getStress(world_xy);\r
  float val = u_component == 0 ? stress.x : (u_component == 1 ? stress.y : stress.z);\r
\r
  #ifdef IS_PLATE_FRAG\r
    if (u_hole == 1 && length(world_xy) < u_r0) {\r
      fragColor = vec4(1.0);\r
    } else {\r
      fragColor = vec4(applyCMap(val), 1.0);\r
    }\r
  #else\r
    if (u_hole == 1 && length(world_xy) < u_r0) {\r
      fragColor = vec4(0.0, 0.0, 0.0, 0.0);\r
    } else {\r
      fragColor = vec4(val, world_xy.x, world_xy.y, 1.0);\r
    }\r
  #endif\r
}`;function Ct(){const e=J.checked,t=x.rho.value.trim(),n=e?.1:Math.max(0,parseFloat(t)||1e-11),r=Ot(parseFloat(x.nuM.value)||.17),o=Ot(parseFloat(x.nuP.value)||.33);let i="strain";const s=Array.from(x.plane).find(u=>u.checked);return s?i=s.value:console.warn("[material] no plane radio selected - defaulting to strain"),{gamma:n,kappa_m:an(r,i),kappa_p:an(o,i)}}let X=1,ee=0,te=0;const Rt=()=>{wt.value=ee.toFixed(2),Et.value=te.toFixed(2),At.value=X.toFixed(2)};gr.addEventListener("click",()=>{X=1,ee=0,te=0,Rt()});T.addEventListener("wheel",e=>{e.preventDefault();const t=T.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,o=n/T.clientWidth*2-1,i=1-r/T.clientHeight*2,s=T.clientWidth/T.clientHeight,u=o*s,c=X,p=e.deltaY>0?1.1:.9;X=ke(c*p,.1,1e6),ee+=(ee+u)*(X/c-1),te+=(te+i)*(X/c-1),Rt()},{passive:!1});let Gt=!1,Ht=0,jt=0;T.addEventListener("mousedown",e=>{Gt=!0,Ht=e.clientX,jt=e.clientY});window.addEventListener("mouseup",()=>Gt=!1);window.addEventListener("mousemove",e=>{if(!Gt)return;const t=T.width/T.height,n=Math.max(X,1);ee=ke(ee-(e.clientX-Ht)/T.height*2*t,-n,n),te=ke(te+(e.clientY-jt)/T.height*2,-n,n),Ht=e.clientX,jt=e.clientY,Rt()});wt.addEventListener("input",()=>{const e=parseFloat(wt.value);Number.isFinite(e)&&(ee=ke(e,-1,1),wt.value=ee.toFixed(2))});Et.addEventListener("input",()=>{const e=parseFloat(Et.value);Number.isFinite(e)&&(te=ke(e,-1,1),Et.value=te.toFixed(2))});At.addEventListener("input",()=>{const e=parseFloat(At.value);Number.isFinite(e)&&(X=ke(e,.1,1e6),At.value=X.toFixed(2))});T.addEventListener("dblclick",()=>{X=1,ee=0,te=0,Rt()});const Rr=(e,t=1,n=1)=>{const r=n*t,o=e/60,i=r*(1-Math.abs(o%2-1)),s=n-r;let u=0,c=0,p=0;return o<1?(u=r,c=i):o<2?(u=i,c=r):o<3?(c=r,p=i):o<4?(c=i,p=r):o<5?(u=i,p=r):(u=r,p=i),[u+s,c+s,p+s]};function Fr(e){return Rr(270*(1-e))}function Dr(e){const t=n=>Math.max(0,Math.min(1,n));return[t(1.5-Math.abs(4*e-3)),t(1.5-Math.abs(4*e-2)),t(1.5-Math.abs(4*e-1))]}function Pr(e){return[Math.min(1,3*e),Math.min(1,3*(e-1/3)),Math.min(1,3*(e-2/3))].map(t=>Math.max(0,t))}function kr(e){const t=[.23,.3,.75],n=[.86,.87,.91],r=[.7,.02,.15];return e<.5?t.map((o,i)=>o+(n[i]-o)*e*2):n.map((o,i)=>o+(r[i]-o)*(e-.5)*2)}function Br(e){return[e,e,e]}const Wt=e=>{switch(+x.cmap.value){case 1:return Dr(e);case 2:return Pr(e);case 3:return kr(e);case 4:return Br(e);default:return Fr(e)}};let un,ln,fn;function Ur(e,t){const n=x.cmap.value;if(e===un&&t===ln&&n===fn)return;const r=Re.clientWidth||1,o=Re.clientHeight||1;(Re.width!==r||Re.height!==o)&&(Re.width=r,Re.height=o);const i=sn.createImageData(r,o);for(let s=0;s<r;s++){const u=s/(r-1),[c,p,f]=Wt(u);for(let g=0;g<o;g++){const y=(g*r+s)*4;i.data[y]=c*255,i.data[y+1]=p*255,i.data[y+2]=f*255,i.data[y+3]=255}}sn.putImageData(i,0,0),wr.textContent=e.toFixed(2),Er.textContent=t.toFixed(2),un=e,ln=t,fn=n}const Ee=1,Lt=.5,Nr=`#version 300 es\r
precision highp float;\r
\r
uniform sampler2D u_source;\r
uniform int u_op; // This new uniform tells the shader what to do: 0=MIN, 1=MAX\r
\r
in vec2 v_ndc;\r
\r
out vec4 out_val; // Now has only one output\r
\r
vec4 op_min(vec4 a, vec4 b) {\r
    if (a.a < 0.5) return b; // a is invalid\r
    if (b.a < 0.5) return a; // b is invalid\r
    return a.r < b.r ? a : b;\r
}\r
\r
vec4 op_max(vec4 a, vec4 b) {\r
    if (a.a < 0.5) return b;\r
    if (b.a < 0.5) return a;\r
    return a.r > b.r ? a : b;\r
}\r
\r
void main() {\r
    // Fetch the 4 data points from the 2x2 block in the source texture\r
    ivec2 src_coord_BL = ivec2(gl_FragCoord.xy) * 2;\r
    vec4 p00 = texelFetch(u_source, src_coord_BL, 0);\r
    vec4 p10 = texelFetch(u_source, src_coord_BL + ivec2(1, 0), 0);\r
    vec4 p01 = texelFetch(u_source, src_coord_BL + ivec2(0, 1), 0);\r
    vec4 p11 = texelFetch(u_source, src_coord_BL + ivec2(1, 1), 0);\r
\r
    if (u_op == 0) { // Find Minimum\r
        vec4 result = op_min(p00, p10);\r
        result = op_min(result, p01);\r
        result = op_min(result, p11);\r
        out_val = result;\r
    } else { // Find Maximum\r
        vec4 result = op_max(p00, p10);\r
        result = op_max(result, p01);\r
        result = op_max(result, p11);\r
        out_val = result;\r
    }\r
}`,be=1024;class Ir{constructor(t){ie(this,"gl");ie(this,"stressProg");ie(this,"reduceProg");ie(this,"fboA");ie(this,"fboB");ie(this,"stressTex");ie(this,"pongTexA");ie(this,"pongTexB");ie(this,"vao");ie(this,"reduceOpLoc");this.gl=t,this.stressProg=Vt(t,$t,Nn),this.reduceProg=Vt(t,$t,Nr),this.reduceOpLoc=t.getUniformLocation(this.reduceProg,"u_op"),this.vao=t.createVertexArray(),t.bindVertexArray(this.vao);const n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0),t.bindVertexArray(null),this.fboA=t.createFramebuffer(),this.fboB=t.createFramebuffer(),this.stressTex=this.createFloatTexture(be,be),this.pongTexA=this.createFloatTexture(be/2,be/2),this.pongTexB=this.createFloatTexture(be/2,be/2)}createFloatTexture(t,n){const r=this.gl,o=r.createTexture();return r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,t,n,0,r.RGBA,r.FLOAT,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),o}findMinMax(t){const n=this.gl;n.bindVertexArray(this.vao),n.useProgram(this.stressProg),this.setAllUniforms(this.stressProg,t),n.bindFramebuffer(n.FRAMEBUFFER,this.fboA),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.stressTex,0),n.viewport(0,0,be,be),n.drawArrays(n.TRIANGLES,0,6),n.useProgram(this.reduceProg),n.uniform1i(n.getUniformLocation(this.reduceProg,"u_source"),0);const r=this.runReduction(0),o=new Float32Array(4);n.bindFramebuffer(n.FRAMEBUFFER,r),n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,o);const i=this.runReduction(1),s=new Float32Array(4);return n.bindFramebuffer(n.FRAMEBUFFER,i),n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,s),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindVertexArray(null),{vmin:o[0],xMin:o[1],yMin:o[2],vmax:s[0],xMax:s[1],yMax:s[2]}}runReduction(t){const n=this.gl;n.uniform1i(this.reduceOpLoc,t);let r=this.stressTex,o,i=be,s=0;for(;i>1;){i/=2;const u=s%2===0?this.pongTexA:this.pongTexB;o=s%2===0?this.fboA:this.fboB,n.bindFramebuffer(n.FRAMEBUFFER,o),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,u,0),n.bindTexture(n.TEXTURE_2D,r),n.viewport(0,0,i,i),n.drawArrays(n.TRIANGLES,0,6),r=u,s++}return s%2===1?this.fboA:this.fboB}setAllUniforms(t,n){const r=this.gl;r.uniform1f(r.getUniformLocation(t,"u_r0"),n.r0),r.uniform1f(r.getUniformLocation(t,"u_lambda"),n.lambda),r.uniform1f(r.getUniformLocation(t,"u_beta"),n.beta),r.uniform1f(r.getUniformLocation(t,"u_gamma"),n.gamma),r.uniform1f(r.getUniformLocation(t,"u_kappa_m"),n.kappa_m),r.uniform1f(r.getUniformLocation(t,"u_kappa_p"),n.kappa_p),r.uniform1i(r.getUniformLocation(t,"u_component"),n.comp),r.uniform1i(r.getUniformLocation(t,"u_hole"),n.hole),r.uniform1f(r.getUniformLocation(t,"u_aspect"),1),r.uniform1f(r.getUniformLocation(t,"u_S"),1)}}const pn={lambda:1,beta:0},dn=(e,t=0)=>Number.isFinite(e.valueAsNumber)?e.valueAsNumber:t;function vn(e,t){const n=T.clientWidth/T.clientHeight,r=X*Lt,o=t*r-te,s=((e*r-ee)/n+1)*.5*T.clientWidth,u=(1-o)*.5*T.clientHeight;return{cx:s,cy:u}}function In(e,t){e/=Lt,t/=Lt;const{gamma:n,kappa_m:r,kappa_p:o}=Ct(),i=dn(x.lambda,pn.lambda),s=dn(x.beta,pn.beta)*Math.PI/180,u=1,c=J.checked?0:(1+r)/(2+n*(o-1)),p=J.checked?0:(1+r)/(n+r),f=Math.cos(2*s),g=Math.sin(2*s);let y=Math.hypot(e,t),m=Math.atan2(t,e);const w=1e-9,E=Ee;Math.abs(y-E)<w&&(y=E);let A,O,S;if(y<E-w)A=.5*u*((i+1)*c+(1-i)*p*f),O=.5*u*((i+1)*c-(1-i)*p*f),S=.5*u*(1-i)*p*g;else{const M=Ee*Ee/(y*y),a=M*M,_=Math.cos(2*m),d=Math.sin(2*m);A=.5*u*(i+1)*(1-(1-c)*M*_)+.5*u*(1-i)*(f+(1-p)*(3*a*Math.cos(4*m-2*s)-4*M*Math.cos(2*s-3*m)*Math.cos(m))),O=.5*u*(i+1)*(1+(1-c)*M*_)-.5*u*(1-i)*(f+(1-p)*(3*a*Math.cos(4*m-2*s)-4*M*Math.sin(2*s-3*m)*Math.sin(m))),S=-.5*u*(i+1)*(1-c)*M*d+.5*u*(1-i)*(g+(1-p)*(3*a-2*M)*Math.sin(4*m-2*s))}return[A,O,S]}const h=Cr(T),Vr=new Ir(h),mn=Nn.split(`
`),$r=[mn[0],"#define IS_PLATE_FRAG",...mn.slice(1)].join(`
`),H=Vt(h,$t,$r),Vn=h.createVertexArray();h.bindVertexArray(Vn);const Hr=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,Hr);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),h.STATIC_DRAW);h.enableVertexAttribArray(0);h.vertexAttribPointer(0,2,h.FLOAT,!1,0,0);h.bindVertexArray(null);const W={r0:h.getUniformLocation(H,"u_r0"),lambda:h.getUniformLocation(H,"u_lambda"),beta:h.getUniformLocation(H,"u_beta"),gamma:h.getUniformLocation(H,"u_gamma"),kappa_m:h.getUniformLocation(H,"u_kappa_m"),kappa_p:h.getUniformLocation(H,"u_kappa_p"),S:h.getUniformLocation(H,"u_S"),comp:h.getUniformLocation(H,"u_component"),cmap:h.getUniformLocation(H,"u_cmap"),minV:h.getUniformLocation(H,"u_minVal"),maxV:h.getUniformLocation(H,"u_maxVal"),zoom:h.getUniformLocation(H,"u_zoom"),pan:h.getUniformLocation(H,"u_pan"),asp:h.getUniformLocation(H,"u_aspect"),hole:h.getUniformLocation(H,"u_hole")};for(const e of[we,xe])Object.assign(e.style,{position:"absolute",width:"9px",height:"9px",borderRadius:"50%",border:"2px solid #fff",boxShadow:"0 0 0 1px rgba(0,0,0,0.5)",pointerEvents:"none"});we.style.background="#d00";xe.style.background="#00d";T.parentElement.append(we,xe);const je=(e,t=0)=>Number.isFinite(e.valueAsNumber)?e.valueAsNumber:t,Fe=new Map;let hn="";function $n(e){const{gamma:t,kappa_m:n,kappa_p:r}=Ct();return[e,je(x.lambda,1),je(x.beta,0),t,n,r,J.checked].join("|")}function Tt(e){const t=$n(e);if(Fe.has(t))return Fe.get(t);const{gamma:n,kappa_m:r,kappa_p:o}=Ct(),i={r0:Ee,lambda:je(x.lambda,1),beta:je(x.beta,0)*Math.PI/180,gamma:n,kappa_m:r,kappa_p:o,comp:e,hole:J.checked?1:0};let s=Vr.findMinMax(i);return s=Xr(s,e),Fe.set(t,s),Fe.size>50&&Fe.delete(Fe.keys().next().value),s}function jr(e,t){const{gamma:n,kappa_m:r,kappa_p:o}=Ct();h.useProgram(H),h.uniform1f(W.r0,Ee),h.uniform1f(W.lambda,je(x.lambda,1)),h.uniform1f(W.beta,je(x.beta,0)*Math.PI/180),h.uniform1f(W.gamma,n),h.uniform1f(W.kappa_m,r),h.uniform1f(W.kappa_p,o),h.uniform1f(W.S,1),h.uniform1i(W.comp,+[...x.comp].find(i=>i.checked).value),h.uniform1i(W.cmap,+x.cmap.value),h.uniform1f(W.minV,e),h.uniform1f(W.maxV,t),h.uniform1f(W.zoom,X*Lt),h.uniform2f(W.pan,ee,te),h.uniform1f(W.asp,T.width/T.height),h.uniform1i(W.hole,J.checked?1:0)}function Wr(){const e=Tt(0),t=Tt(1),n=Tt(2);Ar.textContent=e.vmin.toFixed(2),Tr.textContent=e.vmax.toFixed(2),_r.textContent=t.vmin.toFixed(2),Or.textContent=t.vmax.toFixed(2),Lr.textContent=n.vmin.toFixed(2),Mr.textContent=n.vmax.toFixed(2)}function Xr(e,t){let{vmin:n,vmax:r}=e;const o=900;for(let i=0;i<o;++i){const s=i/o*2*Math.PI,u=Ee*Math.cos(s),c=Ee*Math.sin(s),p=In(u,c)[t];p<n&&(n=p),p>r&&(r=p)}return{...e,vmin:n,vmax:r}}function Hn(){const e=+[...x.comp].find(w=>w.checked).value,t=$n(e).split("|").slice(1).join("|");t!==hn&&(Fe.clear(),hn=t);let{vmin:n,vmax:r,xMin:o,yMin:i,xMax:s,yMax:u}=Tt(e);J.checked||(Math.hypot(s,u)<Ee-1e-9&&(s=0,u=0),Math.hypot(o,i)<Ee-1e-9&&(o=0,i=0)),h.disable(h.BLEND),h.bindFramebuffer(h.FRAMEBUFFER,null),h.viewport(0,0,T.width,T.height),h.bindVertexArray(Vn),jr(n,r),h.drawArrays(h.TRIANGLES,0,6),h.bindVertexArray(null);const c=Wt(0),p=Wt(1);xe.style.background=`rgb(${c[0]*255}, ${c[1]*255}, ${c[2]*255})`,we.style.background=`rgb(${p[0]*255}, ${p[1]*255}, ${p[2]*255})`;const f=c[0]+c[1]+c[2],g=p[0]+p[1]+p[2];xe.style.borderColor=f>2?"#333":"#fff",we.style.borderColor=g>2?"#333":"#fff";const y=vn(s,u),m=vn(o,i);we.style.left=`${y.cx-6}px`,we.style.top=`${y.cy-6}px`,xe.style.left=`${m.cx-6}px`,xe.style.top=`${m.cy-6}px`,Ur(n,r),Wr(),requestAnimationFrame(Hn)}T.addEventListener("mousemove",e=>{const t=T.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,o=n/T.clientWidth*2-1,i=1-r/T.clientHeight*2,s=T.clientWidth/T.clientHeight,u=(o*s+ee)/X,c=(i+te)/X,[p,f,g]=In(u,c);kn.textContent=p.toFixed(2),Bn.textContent=f.toFixed(2),Un.textContent=g.toFixed(2)});T.addEventListener("mouseleave",()=>{kn.textContent="‑",Bn.textContent="‑",Un.textContent="‑"});function jn(){const e=window.devicePixelRatio||1;T.width=T.clientWidth*e,T.height=T.clientHeight*e,h.viewport(0,0,T.width,T.height)}window.addEventListener("resize",jn);function Yr(){jn(),requestAnimationFrame(Hn)}var Y="top",ne="bottom",re="right",q="left",Kt="auto",it=[Y,ne,re,q],We="start",rt="end",qr="clippingParents",Wn="viewport",Qe="popper",zr="reference",gn=it.reduce(function(e,t){return e.concat([t+"-"+We,t+"-"+rt])},[]),Xn=[].concat(it,[Kt]).reduce(function(e,t){return e.concat([t,t+"-"+We,t+"-"+rt])},[]),Gr="beforeRead",Kr="read",Zr="afterRead",Jr="beforeMain",Qr="main",eo="afterMain",to="beforeWrite",no="write",ro="afterWrite",oo=[Gr,Kr,Zr,Jr,Qr,eo,to,no,ro];function de(e){return e?(e.nodeName||"").toLowerCase():null}function K(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Be(e){var t=K(e).Element;return e instanceof t||e instanceof Element}function Q(e){var t=K(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Zt(e){if(typeof ShadowRoot>"u")return!1;var t=K(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function io(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},i=t.elements[n];!Q(i)||!de(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(s){var u=o[s];u===!1?i.removeAttribute(s):i.setAttribute(s,u===!0?"":u)}))})}function ao(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],i=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),u=s.reduce(function(c,p){return c[p]="",c},{});!Q(o)||!de(o)||(Object.assign(o.style,u),Object.keys(i).forEach(function(c){o.removeAttribute(c)}))})}}const Yn={name:"applyStyles",enabled:!0,phase:"write",fn:io,effect:ao,requires:["computeStyles"]};function pe(e){return e.split("-")[0]}var Pe=Math.max,Mt=Math.min,Xe=Math.round;function Xt(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function qn(){return!/^((?!chrome|android).)*safari/i.test(Xt())}function Ye(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),o=1,i=1;t&&Q(e)&&(o=e.offsetWidth>0&&Xe(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Xe(r.height)/e.offsetHeight||1);var s=Be(e)?K(e):window,u=s.visualViewport,c=!qn()&&n,p=(r.left+(c&&u?u.offsetLeft:0))/o,f=(r.top+(c&&u?u.offsetTop:0))/i,g=r.width/o,y=r.height/i;return{width:g,height:y,top:f,right:p+g,bottom:f+y,left:p,x:p,y:f}}function Jt(e){var t=Ye(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function zn(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Zt(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ae(e){return K(e).getComputedStyle(e)}function so(e){return["table","td","th"].indexOf(de(e))>=0}function Oe(e){return((Be(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ft(e){return de(e)==="html"?e:e.assignedSlot||e.parentNode||(Zt(e)?e.host:null)||Oe(e)}function bn(e){return!Q(e)||Ae(e).position==="fixed"?null:e.offsetParent}function co(e){var t=/firefox/i.test(Xt()),n=/Trident/i.test(Xt());if(n&&Q(e)){var r=Ae(e);if(r.position==="fixed")return null}var o=Ft(e);for(Zt(o)&&(o=o.host);Q(o)&&["html","body"].indexOf(de(o))<0;){var i=Ae(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function at(e){for(var t=K(e),n=bn(e);n&&so(n)&&Ae(n).position==="static";)n=bn(n);return n&&(de(n)==="html"||de(n)==="body"&&Ae(n).position==="static")?t:n||co(e)||t}function Qt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function et(e,t,n){return Pe(e,Mt(t,n))}function uo(e,t,n){var r=et(e,t,n);return r>n?n:r}function Gn(){return{top:0,right:0,bottom:0,left:0}}function Kn(e){return Object.assign({},Gn(),e)}function Zn(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var lo=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Kn(typeof t!="number"?t:Zn(t,it))};function fo(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,s=n.modifiersData.popperOffsets,u=pe(n.placement),c=Qt(u),p=[q,re].indexOf(u)>=0,f=p?"height":"width";if(!(!i||!s)){var g=lo(o.padding,n),y=Jt(i),m=c==="y"?Y:q,w=c==="y"?ne:re,E=n.rects.reference[f]+n.rects.reference[c]-s[c]-n.rects.popper[f],A=s[c]-n.rects.reference[c],O=at(i),S=O?c==="y"?O.clientHeight||0:O.clientWidth||0:0,M=E/2-A/2,a=g[m],_=S-y[f]-g[w],d=S/2-y[f]/2+M,F=et(a,d,_),U=c;n.modifiersData[r]=(t={},t[U]=F,t.centerOffset=F-d,t)}}function po(e){var t=e.state,n=e.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||zn(t.elements.popper,o)&&(t.elements.arrow=o))}const vo={name:"arrow",enabled:!0,phase:"main",fn:fo,effect:po,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qe(e){return e.split("-")[1]}var mo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ho(e,t){var n=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:Xe(n*o)/o||0,y:Xe(r*o)/o||0}}function yn(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,s=e.offsets,u=e.position,c=e.gpuAcceleration,p=e.adaptive,f=e.roundOffsets,g=e.isFixed,y=s.x,m=y===void 0?0:y,w=s.y,E=w===void 0?0:w,A=typeof f=="function"?f({x:m,y:E}):{x:m,y:E};m=A.x,E=A.y;var O=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),M=q,a=Y,_=window;if(p){var d=at(n),F="clientHeight",U="clientWidth";if(d===K(n)&&(d=Oe(n),Ae(d).position!=="static"&&u==="absolute"&&(F="scrollHeight",U="scrollWidth")),d=d,o===Y||(o===q||o===re)&&i===rt){a=ne;var B=g&&d===_&&_.visualViewport?_.visualViewport.height:d[F];E-=B-r.height,E*=c?1:-1}if(o===q||(o===Y||o===ne)&&i===rt){M=re;var P=g&&d===_&&_.visualViewport?_.visualViewport.width:d[U];m-=P-r.width,m*=c?1:-1}}var N=Object.assign({position:u},p&&mo),k=f===!0?ho({x:m,y:E},K(n)):{x:m,y:E};if(m=k.x,E=k.y,c){var D;return Object.assign({},N,(D={},D[a]=S?"0":"",D[M]=O?"0":"",D.transform=(_.devicePixelRatio||1)<=1?"translate("+m+"px, "+E+"px)":"translate3d("+m+"px, "+E+"px, 0)",D))}return Object.assign({},N,(t={},t[a]=S?E+"px":"",t[M]=O?m+"px":"",t.transform="",t))}function go(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=r===void 0?!0:r,i=n.adaptive,s=i===void 0?!0:i,u=n.roundOffsets,c=u===void 0?!0:u,p={placement:pe(t.placement),variation:qe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,yn(Object.assign({},p,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,yn(Object.assign({},p,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const bo={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:go,data:{}};var yt={passive:!0};function yo(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=o===void 0?!0:o,s=r.resize,u=s===void 0?!0:s,c=K(t.elements.popper),p=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&p.forEach(function(f){f.addEventListener("scroll",n.update,yt)}),u&&c.addEventListener("resize",n.update,yt),function(){i&&p.forEach(function(f){f.removeEventListener("scroll",n.update,yt)}),u&&c.removeEventListener("resize",n.update,yt)}}const xo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:yo,data:{}};var wo={left:"right",right:"left",bottom:"top",top:"bottom"};function _t(e){return e.replace(/left|right|bottom|top/g,function(t){return wo[t]})}var Eo={start:"end",end:"start"};function xn(e){return e.replace(/start|end/g,function(t){return Eo[t]})}function en(e){var t=K(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function tn(e){return Ye(Oe(e)).left+en(e).scrollLeft}function Ao(e,t){var n=K(e),r=Oe(e),o=n.visualViewport,i=r.clientWidth,s=r.clientHeight,u=0,c=0;if(o){i=o.width,s=o.height;var p=qn();(p||!p&&t==="fixed")&&(u=o.offsetLeft,c=o.offsetTop)}return{width:i,height:s,x:u+tn(e),y:c}}function To(e){var t,n=Oe(e),r=en(e),o=(t=e.ownerDocument)==null?void 0:t.body,i=Pe(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=Pe(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),u=-r.scrollLeft+tn(e),c=-r.scrollTop;return Ae(o||n).direction==="rtl"&&(u+=Pe(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:s,x:u,y:c}}function nn(e){var t=Ae(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function Jn(e){return["html","body","#document"].indexOf(de(e))>=0?e.ownerDocument.body:Q(e)&&nn(e)?e:Jn(Ft(e))}function tt(e,t){var n;t===void 0&&(t=[]);var r=Jn(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),i=K(r),s=o?[i].concat(i.visualViewport||[],nn(r)?r:[]):r,u=t.concat(s);return o?u:u.concat(tt(Ft(s)))}function Yt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function _o(e,t){var n=Ye(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function wn(e,t,n){return t===Wn?Yt(Ao(e,n)):Be(t)?_o(t,n):Yt(To(Oe(e)))}function Oo(e){var t=tt(Ft(e)),n=["absolute","fixed"].indexOf(Ae(e).position)>=0,r=n&&Q(e)?at(e):e;return Be(r)?t.filter(function(o){return Be(o)&&zn(o,r)&&de(o)!=="body"}):[]}function Lo(e,t,n,r){var o=t==="clippingParents"?Oo(e):[].concat(t),i=[].concat(o,[n]),s=i[0],u=i.reduce(function(c,p){var f=wn(e,p,r);return c.top=Pe(f.top,c.top),c.right=Mt(f.right,c.right),c.bottom=Mt(f.bottom,c.bottom),c.left=Pe(f.left,c.left),c},wn(e,s,r));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function Qn(e){var t=e.reference,n=e.element,r=e.placement,o=r?pe(r):null,i=r?qe(r):null,s=t.x+t.width/2-n.width/2,u=t.y+t.height/2-n.height/2,c;switch(o){case Y:c={x:s,y:t.y-n.height};break;case ne:c={x:s,y:t.y+t.height};break;case re:c={x:t.x+t.width,y:u};break;case q:c={x:t.x-n.width,y:u};break;default:c={x:t.x,y:t.y}}var p=o?Qt(o):null;if(p!=null){var f=p==="y"?"height":"width";switch(i){case We:c[p]=c[p]-(t[f]/2-n[f]/2);break;case rt:c[p]=c[p]+(t[f]/2-n[f]/2);break}}return c}function ot(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=r===void 0?e.placement:r,i=n.strategy,s=i===void 0?e.strategy:i,u=n.boundary,c=u===void 0?qr:u,p=n.rootBoundary,f=p===void 0?Wn:p,g=n.elementContext,y=g===void 0?Qe:g,m=n.altBoundary,w=m===void 0?!1:m,E=n.padding,A=E===void 0?0:E,O=Kn(typeof A!="number"?A:Zn(A,it)),S=y===Qe?zr:Qe,M=e.rects.popper,a=e.elements[w?S:y],_=Lo(Be(a)?a:a.contextElement||Oe(e.elements.popper),c,f,s),d=Ye(e.elements.reference),F=Qn({reference:d,element:M,placement:o}),U=Yt(Object.assign({},M,F)),B=y===Qe?U:d,P={top:_.top-B.top+O.top,bottom:B.bottom-_.bottom+O.bottom,left:_.left-B.left+O.left,right:B.right-_.right+O.right},N=e.modifiersData.offset;if(y===Qe&&N){var k=N[o];Object.keys(P).forEach(function(D){var z=[re,ne].indexOf(D)>=0?1:-1,G=[Y,ne].indexOf(D)>=0?"y":"x";P[D]+=k[G]*z})}return P}function Mo(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,s=n.padding,u=n.flipVariations,c=n.allowedAutoPlacements,p=c===void 0?Xn:c,f=qe(r),g=f?u?gn:gn.filter(function(w){return qe(w)===f}):it,y=g.filter(function(w){return p.indexOf(w)>=0});y.length===0&&(y=g);var m=y.reduce(function(w,E){return w[E]=ot(e,{placement:E,boundary:o,rootBoundary:i,padding:s})[pe(E)],w},{});return Object.keys(m).sort(function(w,E){return m[w]-m[E]})}function So(e){if(pe(e)===Kt)return[];var t=_t(e);return[xn(e),t,xn(t)]}function Co(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=o===void 0?!0:o,s=n.altAxis,u=s===void 0?!0:s,c=n.fallbackPlacements,p=n.padding,f=n.boundary,g=n.rootBoundary,y=n.altBoundary,m=n.flipVariations,w=m===void 0?!0:m,E=n.allowedAutoPlacements,A=t.options.placement,O=pe(A),S=O===A,M=c||(S||!w?[_t(A)]:So(A)),a=[A].concat(M).reduce(function(ve,oe){return ve.concat(pe(oe)===Kt?Mo(t,{placement:oe,boundary:f,rootBoundary:g,padding:p,flipVariations:w,allowedAutoPlacements:E}):oe)},[]),_=t.rects.reference,d=t.rects.popper,F=new Map,U=!0,B=a[0],P=0;P<a.length;P++){var N=a[P],k=pe(N),D=qe(N)===We,z=[Y,ne].indexOf(k)>=0,G=z?"width":"height",V=ot(t,{placement:N,boundary:f,rootBoundary:g,altBoundary:y,padding:p}),$=z?D?re:q:D?ne:Y;_[G]>d[G]&&($=_t($));var I=_t($),se=[];if(i&&se.push(V[k]<=0),u&&se.push(V[$]<=0,V[I]<=0),se.every(function(ve){return ve})){B=N,U=!1;break}F.set(N,se)}if(U)for(var ce=w?3:1,Le=function(oe){var me=a.find(function(Ue){var he=F.get(Ue);if(he)return he.slice(0,oe).every(function(Ne){return Ne})});if(me)return B=me,"break"},ue=ce;ue>0;ue--){var Me=Le(ue);if(Me==="break")break}t.placement!==B&&(t.modifiersData[r]._skip=!0,t.placement=B,t.reset=!0)}}const Ro={name:"flip",enabled:!0,phase:"main",fn:Co,requiresIfExists:["offset"],data:{_skip:!1}};function En(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function An(e){return[Y,re,ne,q].some(function(t){return e[t]>=0})}function Fo(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,s=ot(t,{elementContext:"reference"}),u=ot(t,{altBoundary:!0}),c=En(s,r),p=En(u,o,i),f=An(c),g=An(p);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:p,isReferenceHidden:f,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":g})}const Do={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Fo};function Po(e,t,n){var r=pe(e),o=[q,Y].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=i[0],u=i[1];return s=s||0,u=(u||0)*o,[q,re].indexOf(r)>=0?{x:u,y:s}:{x:s,y:u}}function ko(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=o===void 0?[0,0]:o,s=Xn.reduce(function(f,g){return f[g]=Po(g,t.rects,i),f},{}),u=s[t.placement],c=u.x,p=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=p),t.modifiersData[r]=s}const Bo={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ko};function Uo(e){var t=e.state,n=e.name;t.modifiersData[n]=Qn({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const No={name:"popperOffsets",enabled:!0,phase:"read",fn:Uo,data:{}};function Io(e){return e==="x"?"y":"x"}function Vo(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=o===void 0?!0:o,s=n.altAxis,u=s===void 0?!1:s,c=n.boundary,p=n.rootBoundary,f=n.altBoundary,g=n.padding,y=n.tether,m=y===void 0?!0:y,w=n.tetherOffset,E=w===void 0?0:w,A=ot(t,{boundary:c,rootBoundary:p,padding:g,altBoundary:f}),O=pe(t.placement),S=qe(t.placement),M=!S,a=Qt(O),_=Io(a),d=t.modifiersData.popperOffsets,F=t.rects.reference,U=t.rects.popper,B=typeof E=="function"?E(Object.assign({},t.rects,{placement:t.placement})):E,P=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),N=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,k={x:0,y:0};if(d){if(i){var D,z=a==="y"?Y:q,G=a==="y"?ne:re,V=a==="y"?"height":"width",$=d[a],I=$+A[z],se=$-A[G],ce=m?-U[V]/2:0,Le=S===We?F[V]:U[V],ue=S===We?-U[V]:-F[V],Me=t.elements.arrow,ve=m&&Me?Jt(Me):{width:0,height:0},oe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Gn(),me=oe[z],Ue=oe[G],he=et(0,F[V],ve[V]),Ne=M?F[V]/2-ce-he-me-P.mainAxis:Le-he-me-P.mainAxis,Te=M?-F[V]/2+ce+he+Ue+P.mainAxis:ue+he+Ue+P.mainAxis,Ie=t.elements.arrow&&at(t.elements.arrow),ct=Ie?a==="y"?Ie.clientTop||0:Ie.clientLeft||0:0,ze=(D=N==null?void 0:N[a])!=null?D:0,ut=$+Ne-ze-ct,lt=$+Te-ze,Ge=et(m?Mt(I,ut):I,$,m?Pe(se,lt):se);d[a]=Ge,k[a]=Ge-$}if(u){var Ke,ft=a==="x"?Y:q,pt=a==="x"?ne:re,ge=d[_],_e=_==="y"?"height":"width",Ze=ge+A[ft],Se=ge-A[pt],Je=[Y,q].indexOf(O)!==-1,dt=(Ke=N==null?void 0:N[_])!=null?Ke:0,vt=Je?Ze:ge-F[_e]-U[_e]-dt+P.altAxis,mt=Je?ge+F[_e]+U[_e]-dt-P.altAxis:Se,ht=m&&Je?uo(vt,ge,mt):et(m?vt:Ze,ge,m?mt:Se);d[_]=ht,k[_]=ht-ge}t.modifiersData[r]=k}}const $o={name:"preventOverflow",enabled:!0,phase:"main",fn:Vo,requiresIfExists:["offset"]};function Ho(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function jo(e){return e===K(e)||!Q(e)?en(e):Ho(e)}function Wo(e){var t=e.getBoundingClientRect(),n=Xe(t.width)/e.offsetWidth||1,r=Xe(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Xo(e,t,n){n===void 0&&(n=!1);var r=Q(t),o=Q(t)&&Wo(t),i=Oe(t),s=Ye(e,o,n),u={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((de(t)!=="body"||nn(i))&&(u=jo(t)),Q(t)?(c=Ye(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=tn(i))),{x:s.left+u.scrollLeft-c.x,y:s.top+u.scrollTop-c.y,width:s.width,height:s.height}}function Yo(e){var t=new Map,n=new Set,r=[];e.forEach(function(i){t.set(i.name,i)});function o(i){n.add(i.name);var s=[].concat(i.requires||[],i.requiresIfExists||[]);s.forEach(function(u){if(!n.has(u)){var c=t.get(u);c&&o(c)}}),r.push(i)}return e.forEach(function(i){n.has(i.name)||o(i)}),r}function qo(e){var t=Yo(e);return oo.reduce(function(n,r){return n.concat(t.filter(function(o){return o.phase===r}))},[])}function zo(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Go(e){var t=e.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Tn={placement:"bottom",modifiers:[],strategy:"absolute"};function _n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Ko(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,o=t.defaultOptions,i=o===void 0?Tn:o;return function(u,c,p){p===void 0&&(p=i);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},Tn,i),modifiersData:{},elements:{reference:u,popper:c},attributes:{},styles:{}},g=[],y=!1,m={state:f,setOptions:function(O){var S=typeof O=="function"?O(f.options):O;E(),f.options=Object.assign({},i,f.options,S),f.scrollParents={reference:Be(u)?tt(u):u.contextElement?tt(u.contextElement):[],popper:tt(c)};var M=qo(Go([].concat(r,f.options.modifiers)));return f.orderedModifiers=M.filter(function(a){return a.enabled}),w(),m.update()},forceUpdate:function(){if(!y){var O=f.elements,S=O.reference,M=O.popper;if(_n(S,M)){f.rects={reference:Xo(S,at(M),f.options.strategy==="fixed"),popper:Jt(M)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(P){return f.modifiersData[P.name]=Object.assign({},P.data)});for(var a=0;a<f.orderedModifiers.length;a++){if(f.reset===!0){f.reset=!1,a=-1;continue}var _=f.orderedModifiers[a],d=_.fn,F=_.options,U=F===void 0?{}:F,B=_.name;typeof d=="function"&&(f=d({state:f,options:U,name:B,instance:m})||f)}}}},update:zo(function(){return new Promise(function(A){m.forceUpdate(),A(f)})}),destroy:function(){E(),y=!0}};if(!_n(u,c))return m;m.setOptions(p).then(function(A){!y&&p.onFirstUpdate&&p.onFirstUpdate(A)});function w(){f.orderedModifiers.forEach(function(A){var O=A.name,S=A.options,M=S===void 0?{}:S,a=A.effect;if(typeof a=="function"){var _=a({state:f,name:O,instance:m,options:M}),d=function(){};g.push(_||d)}})}function E(){g.forEach(function(A){return A()}),g=[]}return m}}var Zo=[xo,No,bo,Yn,Bo,Ro,$o,vo,Do],Jo=Ko({defaultModifiers:Zo}),Qo='<svg width="16" height="6" xmlns="http://www.w3.org/2000/svg"><path d="M0 6s1.796-.013 4.67-3.615C5.851.9 6.93.006 8 0c1.07-.006 2.148.887 3.343 2.385C14.233 6.005 16 6 16 6H0z"></svg>',ei="tippy-box",er="tippy-content",ti="tippy-backdrop",tr="tippy-arrow",nr="tippy-svg-arrow",De={passive:!0,capture:!0},rr=function(){return document.body};function Bt(e,t,n){if(Array.isArray(e)){var r=e[t];return r??(Array.isArray(n)?n[t]:n)}return e}function rn(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function or(e,t){return typeof e=="function"?e.apply(void 0,t):e}function On(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function ni(e){return e.split(/\s+/).filter(Boolean)}function He(e){return[].concat(e)}function Ln(e,t){e.indexOf(t)===-1&&e.push(t)}function ri(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function oi(e){return e.split("-")[0]}function St(e){return[].slice.call(e)}function Mn(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function nt(){return document.createElement("div")}function Dt(e){return["Element","Fragment"].some(function(t){return rn(e,t)})}function ii(e){return rn(e,"NodeList")}function ai(e){return rn(e,"MouseEvent")}function si(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function ci(e){return Dt(e)?[e]:ii(e)?St(e):Array.isArray(e)?e:St(document.querySelectorAll(e))}function Ut(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function Sn(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function ui(e){var t,n=He(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function li(e,t){var n=t.clientX,r=t.clientY;return e.every(function(o){var i=o.popperRect,s=o.popperState,u=o.props,c=u.interactiveBorder,p=oi(s.placement),f=s.modifiersData.offset;if(!f)return!0;var g=p==="bottom"?f.top.y:0,y=p==="top"?f.bottom.y:0,m=p==="right"?f.left.x:0,w=p==="left"?f.right.x:0,E=i.top-r+g>c,A=r-i.bottom-y>c,O=i.left-n+m>c,S=n-i.right-w>c;return E||A||O||S})}function Nt(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){e[r](o,n)})}function Cn(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var fe={isTouch:!1},Rn=0;function fi(){fe.isTouch||(fe.isTouch=!0,window.performance&&document.addEventListener("mousemove",ir))}function ir(){var e=performance.now();e-Rn<20&&(fe.isTouch=!1,document.removeEventListener("mousemove",ir)),Rn=e}function pi(){var e=document.activeElement;if(si(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function di(){document.addEventListener("touchstart",fi,De),window.addEventListener("blur",pi)}var vi=typeof window<"u"&&typeof document<"u",mi=vi?!!window.msCrypto:!1,hi={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},gi={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ae=Object.assign({appendTo:rr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},hi,gi),bi=Object.keys(ae),yi=function(t){var n=Object.keys(t);n.forEach(function(r){ae[r]=t[r]})};function ar(e){var t=e.plugins||[],n=t.reduce(function(r,o){var i=o.name,s=o.defaultValue;if(i){var u;r[i]=e[i]!==void 0?e[i]:(u=ae[i])!=null?u:s}return r},{});return Object.assign({},e,n)}function xi(e,t){var n=t?Object.keys(ar(Object.assign({},ae,{plugins:t}))):bi,r=n.reduce(function(o,i){var s=(e.getAttribute("data-tippy-"+i)||"").trim();if(!s)return o;if(i==="content")o[i]=s;else try{o[i]=JSON.parse(s)}catch{o[i]=s}return o},{});return r}function Fn(e,t){var n=Object.assign({},t,{content:or(t.content,[e])},t.ignoreAttributes?{}:xi(e,t.plugins));return n.aria=Object.assign({},ae.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var wi=function(){return"innerHTML"};function qt(e,t){e[wi()]=t}function Dn(e){var t=nt();return e===!0?t.className=tr:(t.className=nr,Dt(e)?t.appendChild(e):qt(t,e)),t}function Pn(e,t){Dt(t.content)?(qt(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?qt(e,t.content):e.textContent=t.content)}function zt(e){var t=e.firstElementChild,n=St(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(er)}),arrow:n.find(function(r){return r.classList.contains(tr)||r.classList.contains(nr)}),backdrop:n.find(function(r){return r.classList.contains(ti)})}}function sr(e){var t=nt(),n=nt();n.className=ei,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=nt();r.className=er,r.setAttribute("data-state","hidden"),Pn(r,e.props),t.appendChild(n),n.appendChild(r),o(e.props,e.props);function o(i,s){var u=zt(t),c=u.box,p=u.content,f=u.arrow;s.theme?c.setAttribute("data-theme",s.theme):c.removeAttribute("data-theme"),typeof s.animation=="string"?c.setAttribute("data-animation",s.animation):c.removeAttribute("data-animation"),s.inertia?c.setAttribute("data-inertia",""):c.removeAttribute("data-inertia"),c.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?c.setAttribute("role",s.role):c.removeAttribute("role"),(i.content!==s.content||i.allowHTML!==s.allowHTML)&&Pn(p,e.props),s.arrow?f?i.arrow!==s.arrow&&(c.removeChild(f),c.appendChild(Dn(s.arrow))):c.appendChild(Dn(s.arrow)):f&&c.removeChild(f)}return{popper:t,onUpdate:o}}sr.$$tippy=!0;var Ei=1,xt=[],It=[];function Ai(e,t){var n=Fn(e,Object.assign({},ae,ar(Mn(t)))),r,o,i,s=!1,u=!1,c=!1,p=!1,f,g,y,m=[],w=On(ut,n.interactiveDebounce),E,A=Ei++,O=null,S=ri(n.plugins),M={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},a={id:A,reference:e,popper:nt(),popperInstance:O,props:n,state:M,plugins:S,clearDelayTimeouts:vt,setProps:mt,setContent:ht,show:ur,hide:lr,hideWithInteractivity:fr,enable:Je,disable:dt,unmount:pr,destroy:dr};if(!n.render)return a;var _=n.render(a),d=_.popper,F=_.onUpdate;d.setAttribute("data-tippy-root",""),d.id="tippy-"+a.id,a.popper=d,e._tippy=a,d._tippy=a;var U=S.map(function(l){return l.fn(a)}),B=e.hasAttribute("aria-expanded");return Ie(),ce(),$(),I("onCreate",[a]),n.showOnCreate&&Ze(),d.addEventListener("mouseenter",function(){a.props.interactive&&a.state.isVisible&&a.clearDelayTimeouts()}),d.addEventListener("mouseleave",function(){a.props.interactive&&a.props.trigger.indexOf("mouseenter")>=0&&z().addEventListener("mousemove",w)}),a;function P(){var l=a.props.touch;return Array.isArray(l)?l:[l,0]}function N(){return P()[0]==="hold"}function k(){var l;return!!((l=a.props.render)!=null&&l.$$tippy)}function D(){return E||e}function z(){var l=D().parentNode;return l?ui(l):document}function G(){return zt(d)}function V(l){return a.state.isMounted&&!a.state.isVisible||fe.isTouch||f&&f.type==="focus"?0:Bt(a.props.delay,l?0:1,ae.delay)}function $(l){l===void 0&&(l=!1),d.style.pointerEvents=a.props.interactive&&!l?"":"none",d.style.zIndex=""+a.props.zIndex}function I(l,v,b){if(b===void 0&&(b=!0),U.forEach(function(L){L[l]&&L[l].apply(L,v)}),b){var C;(C=a.props)[l].apply(C,v)}}function se(){var l=a.props.aria;if(l.content){var v="aria-"+l.content,b=d.id,C=He(a.props.triggerTarget||e);C.forEach(function(L){var j=L.getAttribute(v);if(a.state.isVisible)L.setAttribute(v,j?j+" "+b:b);else{var Z=j&&j.replace(b,"").trim();Z?L.setAttribute(v,Z):L.removeAttribute(v)}})}}function ce(){if(!(B||!a.props.aria.expanded)){var l=He(a.props.triggerTarget||e);l.forEach(function(v){a.props.interactive?v.setAttribute("aria-expanded",a.state.isVisible&&v===D()?"true":"false"):v.removeAttribute("aria-expanded")})}}function Le(){z().removeEventListener("mousemove",w),xt=xt.filter(function(l){return l!==w})}function ue(l){if(!(fe.isTouch&&(c||l.type==="mousedown"))){var v=l.composedPath&&l.composedPath()[0]||l.target;if(!(a.props.interactive&&Cn(d,v))){if(He(a.props.triggerTarget||e).some(function(b){return Cn(b,v)})){if(fe.isTouch||a.state.isVisible&&a.props.trigger.indexOf("click")>=0)return}else I("onClickOutside",[a,l]);a.props.hideOnClick===!0&&(a.clearDelayTimeouts(),a.hide(),u=!0,setTimeout(function(){u=!1}),a.state.isMounted||me())}}}function Me(){c=!0}function ve(){c=!1}function oe(){var l=z();l.addEventListener("mousedown",ue,!0),l.addEventListener("touchend",ue,De),l.addEventListener("touchstart",ve,De),l.addEventListener("touchmove",Me,De)}function me(){var l=z();l.removeEventListener("mousedown",ue,!0),l.removeEventListener("touchend",ue,De),l.removeEventListener("touchstart",ve,De),l.removeEventListener("touchmove",Me,De)}function Ue(l,v){Ne(l,function(){!a.state.isVisible&&d.parentNode&&d.parentNode.contains(d)&&v()})}function he(l,v){Ne(l,v)}function Ne(l,v){var b=G().box;function C(L){L.target===b&&(Nt(b,"remove",C),v())}if(l===0)return v();Nt(b,"remove",g),Nt(b,"add",C),g=C}function Te(l,v,b){b===void 0&&(b=!1);var C=He(a.props.triggerTarget||e);C.forEach(function(L){L.addEventListener(l,v,b),m.push({node:L,eventType:l,handler:v,options:b})})}function Ie(){N()&&(Te("touchstart",ze,{passive:!0}),Te("touchend",lt,{passive:!0})),ni(a.props.trigger).forEach(function(l){if(l!=="manual")switch(Te(l,ze),l){case"mouseenter":Te("mouseleave",lt);break;case"focus":Te(mi?"focusout":"blur",Ge);break;case"focusin":Te("focusout",Ge);break}})}function ct(){m.forEach(function(l){var v=l.node,b=l.eventType,C=l.handler,L=l.options;v.removeEventListener(b,C,L)}),m=[]}function ze(l){var v,b=!1;if(!(!a.state.isEnabled||Ke(l)||u)){var C=((v=f)==null?void 0:v.type)==="focus";f=l,E=l.currentTarget,ce(),!a.state.isVisible&&ai(l)&&xt.forEach(function(L){return L(l)}),l.type==="click"&&(a.props.trigger.indexOf("mouseenter")<0||s)&&a.props.hideOnClick!==!1&&a.state.isVisible?b=!0:Ze(l),l.type==="click"&&(s=!b),b&&!C&&Se(l)}}function ut(l){var v=l.target,b=D().contains(v)||d.contains(v);if(!(l.type==="mousemove"&&b)){var C=_e().concat(d).map(function(L){var j,Z=L._tippy,Ve=(j=Z.popperInstance)==null?void 0:j.state;return Ve?{popperRect:L.getBoundingClientRect(),popperState:Ve,props:n}:null}).filter(Boolean);li(C,l)&&(Le(),Se(l))}}function lt(l){var v=Ke(l)||a.props.trigger.indexOf("click")>=0&&s;if(!v){if(a.props.interactive){a.hideWithInteractivity(l);return}Se(l)}}function Ge(l){a.props.trigger.indexOf("focusin")<0&&l.target!==D()||a.props.interactive&&l.relatedTarget&&d.contains(l.relatedTarget)||Se(l)}function Ke(l){return fe.isTouch?N()!==l.type.indexOf("touch")>=0:!1}function ft(){pt();var l=a.props,v=l.popperOptions,b=l.placement,C=l.offset,L=l.getReferenceClientRect,j=l.moveTransition,Z=k()?zt(d).arrow:null,Ve=L?{getBoundingClientRect:L,contextElement:L.contextElement||D()}:e,on={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(gt){var $e=gt.state;if(k()){var vr=G(),kt=vr.box;["placement","reference-hidden","escaped"].forEach(function(bt){bt==="placement"?kt.setAttribute("data-placement",$e.placement):$e.attributes.popper["data-popper-"+bt]?kt.setAttribute("data-"+bt,""):kt.removeAttribute("data-"+bt)}),$e.attributes.popper={}}}},Ce=[{name:"offset",options:{offset:C}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!j}},on];k()&&Z&&Ce.push({name:"arrow",options:{element:Z,padding:3}}),Ce.push.apply(Ce,(v==null?void 0:v.modifiers)||[]),a.popperInstance=Jo(Ve,d,Object.assign({},v,{placement:b,onFirstUpdate:y,modifiers:Ce}))}function pt(){a.popperInstance&&(a.popperInstance.destroy(),a.popperInstance=null)}function ge(){var l=a.props.appendTo,v,b=D();a.props.interactive&&l===rr||l==="parent"?v=b.parentNode:v=or(l,[b]),v.contains(d)||v.appendChild(d),a.state.isMounted=!0,ft()}function _e(){return St(d.querySelectorAll("[data-tippy-root]"))}function Ze(l){a.clearDelayTimeouts(),l&&I("onTrigger",[a,l]),oe();var v=V(!0),b=P(),C=b[0],L=b[1];fe.isTouch&&C==="hold"&&L&&(v=L),v?r=setTimeout(function(){a.show()},v):a.show()}function Se(l){if(a.clearDelayTimeouts(),I("onUntrigger",[a,l]),!a.state.isVisible){me();return}if(!(a.props.trigger.indexOf("mouseenter")>=0&&a.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(l.type)>=0&&s)){var v=V(!1);v?o=setTimeout(function(){a.state.isVisible&&a.hide()},v):i=requestAnimationFrame(function(){a.hide()})}}function Je(){a.state.isEnabled=!0}function dt(){a.hide(),a.state.isEnabled=!1}function vt(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(i)}function mt(l){if(!a.state.isDestroyed){I("onBeforeUpdate",[a,l]),ct();var v=a.props,b=Fn(e,Object.assign({},v,Mn(l),{ignoreAttributes:!0}));a.props=b,Ie(),v.interactiveDebounce!==b.interactiveDebounce&&(Le(),w=On(ut,b.interactiveDebounce)),v.triggerTarget&&!b.triggerTarget?He(v.triggerTarget).forEach(function(C){C.removeAttribute("aria-expanded")}):b.triggerTarget&&e.removeAttribute("aria-expanded"),ce(),$(),F&&F(v,b),a.popperInstance&&(ft(),_e().forEach(function(C){requestAnimationFrame(C._tippy.popperInstance.forceUpdate)})),I("onAfterUpdate",[a,l])}}function ht(l){a.setProps({content:l})}function ur(){var l=a.state.isVisible,v=a.state.isDestroyed,b=!a.state.isEnabled,C=fe.isTouch&&!a.props.touch,L=Bt(a.props.duration,0,ae.duration);if(!(l||v||b||C)&&!D().hasAttribute("disabled")&&(I("onShow",[a],!1),a.props.onShow(a)!==!1)){if(a.state.isVisible=!0,k()&&(d.style.visibility="visible"),$(),oe(),a.state.isMounted||(d.style.transition="none"),k()){var j=G(),Z=j.box,Ve=j.content;Ut([Z,Ve],0)}y=function(){var Ce;if(!(!a.state.isVisible||p)){if(p=!0,d.offsetHeight,d.style.transition=a.props.moveTransition,k()&&a.props.animation){var Pt=G(),gt=Pt.box,$e=Pt.content;Ut([gt,$e],L),Sn([gt,$e],"visible")}se(),ce(),Ln(It,a),(Ce=a.popperInstance)==null||Ce.forceUpdate(),I("onMount",[a]),a.props.animation&&k()&&he(L,function(){a.state.isShown=!0,I("onShown",[a])})}},ge()}}function lr(){var l=!a.state.isVisible,v=a.state.isDestroyed,b=!a.state.isEnabled,C=Bt(a.props.duration,1,ae.duration);if(!(l||v||b)&&(I("onHide",[a],!1),a.props.onHide(a)!==!1)){if(a.state.isVisible=!1,a.state.isShown=!1,p=!1,s=!1,k()&&(d.style.visibility="hidden"),Le(),me(),$(!0),k()){var L=G(),j=L.box,Z=L.content;a.props.animation&&(Ut([j,Z],C),Sn([j,Z],"hidden"))}se(),ce(),a.props.animation?k()&&Ue(C,a.unmount):a.unmount()}}function fr(l){z().addEventListener("mousemove",w),Ln(xt,w),w(l)}function pr(){a.state.isVisible&&a.hide(),a.state.isMounted&&(pt(),_e().forEach(function(l){l._tippy.unmount()}),d.parentNode&&d.parentNode.removeChild(d),It=It.filter(function(l){return l!==a}),a.state.isMounted=!1,I("onHidden",[a]))}function dr(){a.state.isDestroyed||(a.clearDelayTimeouts(),a.unmount(),ct(),delete e._tippy,a.state.isDestroyed=!0,I("onDestroy",[a]))}}function st(e,t){t===void 0&&(t={});var n=ae.plugins.concat(t.plugins||[]);di();var r=Object.assign({},t,{plugins:n}),o=ci(e),i=o.reduce(function(s,u){var c=u&&Ai(u,r);return c&&s.push(c),s},[]);return Dt(e)?i[0]:i}st.defaultProps=ae;st.setDefaultProps=yi;st.currentInput=fe;Object.assign({},Yn,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});st.setDefaultProps({render:sr});const cr=document.createElement("div");cr.innerHTML=`
  <div style="max-width:90vw; text-align:center;">
    <img src="/schematic-plate-circular-inclusion.svg"
         alt="Schematic of the plate geometry and loading"
         style="max-width:500px; width:100%; height:auto; background:#fff;"/>
  </div>
`;const Ti={"#geom-load-card-info":{content:cr,allowHTML:!0,theme:"white-tip",trigger:"mouseenter focus",arrow:!1,placement:"right",appendTo:document.body,maxWidth:"none",getReferenceClientRect:()=>{const e=window.innerWidth,t=window.innerHeight;return{width:0,height:0,top:t/2,bottom:t/2,left:e/2,right:e/2,x:e/2,y:t/2,toJSON:()=>{}}}},"#material-card-info":{content:"Γ: Shear modulus ratio (Matrix/Inclusion)<br>ν<sub>M</sub>: Poisson's ratio of the matrix<br>ν<sub>P</sub>: Poisson's ratio of the inclusion",allowHTML:!0},"#view-card-info":{content:"<b>Pan:</b> Click and drag on the canvas.<br><b>Zoom:</b> Use the mouse wheel.<br><b>Reset View:</b> Double-click the canvas.",allowHTML:!0},"#stress-card-info":{content:"The dots on the canvas indicate the locations of the maximum and minimum stress values.",allowHTML:!0}};function _i(){for(const[e,t]of Object.entries(Ti))st(e,{placement:"top",animation:"shift-away",arrow:Qo,theme:"translucent",...t})}Sr();Yr();_i();
